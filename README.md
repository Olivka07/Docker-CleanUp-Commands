# Docker Cleanup Commands

### 10 команд для работы с оптимизацией в Docker
+ docker container prune -f (удалить все не запущенные контейнеры)
+ docker volume prune -fa (удаляет все неиспользуемые локальные тома)
+ docker image prune -fa (удалить все висячие образы и образы, на которые не ссылаются контейнеры)
+ docker network prune -f (удалить все сети, на которые не ссылаются контейнеры)
+ docker system prune -fa --volumes (удалить все неиспользуемые контейнеры, сети, образы (висячие и неиспользуемые), а также анонимные тома)
+ pip install docker-squash && docker-squash -c image_name (создает новый образ с сжатыми слоями и удаляет исходный образ).
+ docker images -f dangling=true (получение висячих образов)
+ docker rm -f $(docker ps -q)  (остановить и удалить принудительно все запущенные контейнеры)
+ docker images (отобразит все образы)
+ docker ps -a (отобразит все контейнеры)

### Инструкция для работы со скриптом:
+ Запустить скрипт командой: bash ./docker-cleanup.sh <название_образа>, где название_образа - образ, на основе которого будет создан новый образ со сжатыми слоями

### Содержание скрипта:
\# Удалить все неиспользуемые контейнеры, сети, образы (висячие и неиспользуемые)
echo "Удаление неиспользуемх объектов за исключением томов..."
docker system prune -fa
\# Удалить все неиспользуемые локальные тома
echo "Удаление неиспользуемх локальных томов..."
docker volume prune -fa
\# Установить docker-squash с помощью pip
echo "Установка docker-squash с помощью pip..."
pip install docker-squash
\# Создать новый образ с сжатыми слоями и удалить исходный образ
echo "Создание образа с сжатыми слоями и удаление исходного образа..."
docker-squash -c $1
\# Показать список всех образов
echo "Список всех образов:"
docker images
\# Показать список всех контейнеров
echo "Список всех контейнеров:"
docker ps -a
